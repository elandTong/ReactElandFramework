{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\src\\\\modal\\\\Popup.jsx\";\nimport React from 'react';\nimport BaseModal from '../router/BaseModal';\nimport { ModalPage } from '../router/Page';\nimport Tool from '../utils/Tool';\nimport APPContext from '../APPContext';\n\nvar Popup = /*#__PURE__*/function (_BaseModal) {\n  _inherits(Popup, _BaseModal);\n\n  var _super = _createSuper(Popup);\n\n  function Popup(props) {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.call(this, props);\n    _this._opts = {\n      width: '50%',\n      height: '50%',\n      angleClose: true,\n      outClose: false,\n      pos: {\n        align: 'center',\n        top: 0,\n        left: 0\n      },\n      onClose: null\n    };\n    _this._keep_opts = {\n      width: '50%',\n      height: '50%',\n      angleClose: true,\n      outClose: false,\n      pos: {\n        align: 'center',\n        top: 0,\n        left: 0\n      },\n      onClose: null\n    };\n    _this._pames = [];\n    _this._isshow = false;\n    _this.renderContent = _this.renderContent.bind(_assertThisInitialized(_this));\n    _this.state = {\n      comp: null,\n      width: '50%',\n      height: '50%',\n      angleClose: true,\n      outClose: false,\n      pos: {\n        top: 0,\n        left: 0,\n        translate: ''\n      },\n      close: {\n        height: 32\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"onCreate\",\n    value: function onCreate() {\n      _get(_getPrototypeOf(Popup.prototype), \"onCreate\", this).call(this);\n    }\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      _get(_getPrototypeOf(Popup.prototype), \"onData\", this).call(this, data);\n\n      console.warn('modal popup on data', data);\n    }\n  }, {\n    key: \"getPosition\",\n    value: function getPosition() {\n      var _pame = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      _pame = Tool.structureAssignment(Object.assign({}, this._keep_opts.pos), _pame);\n      var _result = {\n        top: 0,\n        left: 0,\n        translate: ''\n      };\n\n      switch (_pame.align) {\n        case 'bottom-center':\n          {\n            _result.top = '100%';\n            _result.left = '50%';\n            _result.translate = 'translate(-50%,-100%)';\n            break;\n          }\n\n        case 'top-center':\n          {\n            _result.top = '0';\n            _result.left = '50%';\n            _result.translate = 'translate(-50%,0)';\n            break;\n          }\n\n        case 'left-center':\n          {\n            _result.top = '50%';\n            _result.left = '0';\n            _result.translate = 'translate(0,-50%)';\n            break;\n          }\n\n        case 'right-center':\n          {\n            _result.top = '50%';\n            _result.left = '100%';\n            _result.translate = 'translate(-100%,-50%)';\n            break;\n          }\n\n        case 'none':\n          {\n            _result.top = _pame.top;\n            _result.left = _pame.left;\n            _result.translate = '';\n            break;\n          }\n\n        default:\n          {\n            _result.top = '50%';\n            _result.left = '50%';\n            _result.translate = 'translate(-50%,-50%)';\n            break;\n          }\n      }\n\n      return _result;\n    }\n  }, {\n    key: \"onComp\",\n    value: function onComp(comp) {\n      var pame = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this._isshow = true;\n      this._opts = Tool.structureAssignment(Object.assign({}, this._keep_opts), pame);\n      this._opts.pos = Tool.structureAssignment(Object.assign({}, this._keep_opts.pos), pame.pos);\n      this.setState({\n        comp: comp,\n        width: this._opts.width,\n        height: this._opts.height,\n        angleClose: this._opts.angleClose,\n        outClose: this._opts.outClose,\n        pos: this.getPosition(this._opts.pos)\n      });\n    }\n  }, {\n    key: \"onImg\",\n    value: function onImg(src) {\n      var pame = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this._isshow = true;\n      this._opts = Tool.structureAssignment(Object.assign({}, this._keep_opts), pame);\n      this._opts.pos = Tool.structureAssignment(Object.assign({}, this._keep_opts.pos), pame.pos);\n      this.setState({\n        comp: /*#__PURE__*/React.createElement(\"img\", {\n          src: src,\n          width: '100%',\n          alt: '',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 20\n          }\n        }),\n        width: this._opts.width,\n        height: this._opts.height,\n        angleClose: this._opts.angleClose,\n        outClose: this._opts.outClose,\n        pos: this.getPosition(this._opts.pos)\n      });\n    }\n  }, {\n    key: \"pushComp\",\n    value: function pushComp(comp) {\n      var pame = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this._isshow === true) {\n        this._pames.push({\n          type: 'comp',\n          target: comp,\n          pame: pame\n        });\n      } else {\n        this.onComp(comp, pame);\n      }\n    }\n  }, {\n    key: \"pushImg\",\n    value: function pushImg(src) {\n      var pame = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this._isshow === true) {\n        this._pames.push({\n          type: 'img',\n          target: src,\n          pame: pame\n        });\n      } else {\n        this.onImg(src, pame);\n      }\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this2 = this;\n\n      this.finish();\n\n      if (this._opts.onClose) {\n        this._opts.onClose();\n      }\n\n      this._isshow = false;\n\n      if (this._pames.length > 0) {\n        setTimeout(function () {\n          var _fast = Object.assign({}, _this2._pames[0]);\n\n          _this2._pames.splice(0, 1);\n\n          _this2.navigationModal(Popup._path, null, function (comp) {\n            if (_fast.type === 'comp') {\n              comp.onComp(_fast.target, _fast.pame);\n            } else {\n              comp.onImg(_fast.target, _fast.pame);\n            }\n          });\n        }, 500);\n      }\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(_ref) {\n      var _this3 = this;\n\n      var theme = _ref.theme,\n          language = _ref.language,\n          getapp = _ref.getapp;\n      return /*#__PURE__*/React.createElement(ModalPage, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'pos-relative',\n        onClick: function onClick(e) {\n          if (_this3.state.outClose) {\n            _this3.close(e);\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: 'absolute',\n          width: this.state.width,\n          height: this.state.height,\n          top: this.state.pos.top,\n          left: this.state.pos.left,\n          transform: this.state.pos.translate\n        },\n        onClick: function onClick(e) {\n          e.stopPropagation();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'pos-relative',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 29\n        }\n      }, this.state.comp), this.state.angleClose === true ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          position: 'absolute',\n          top: -this.state.close.height,\n          right: -this.state.close.height\n        },\n        onClick: function onClick(e) {\n          _this3.close(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: require('../assets/res/icon/ic_close.png'),\n        width: this.state.close.height,\n        alt: '',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 37\n        }\n      })) : null))));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(APPContext.Consumer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }\n      }, this.renderContent);\n    }\n  }]);\n\n  return Popup;\n}(BaseModal);\n\nPopup._path = '/popup';\nexport default Popup;","map":{"version":3,"sources":["C:/Users/elandtong/Desktop/ReactElandFramework/src/modal/Popup.jsx"],"names":["React","BaseModal","ModalPage","Tool","APPContext","Popup","props","_opts","width","height","angleClose","outClose","pos","align","top","left","onClose","_keep_opts","_pames","_isshow","renderContent","bind","state","comp","translate","close","data","console","warn","_pame","structureAssignment","Object","assign","_result","pame","setState","getPosition","src","push","type","target","onComp","onImg","finish","length","setTimeout","_fast","splice","navigationModal","_path","theme","language","getapp","e","position","transform","stopPropagation","right","require"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport BaseModal from '../router/BaseModal'\r\nimport { ModalPage } from '../router/Page'\r\nimport Tool from '../utils/Tool'\r\nimport APPContext from '../APPContext'\r\n\r\nclass Popup extends BaseModal {\r\n    static _path = '/popup'\r\n\r\n    _opts = {\r\n        width: '50%',\r\n        height: '50%',\r\n        angleClose: true,\r\n        outClose: false,\r\n        pos: {\r\n            align: 'center',\r\n            top: 0, left: 0\r\n        },\r\n        onClose: null\r\n    }\r\n\r\n    _keep_opts = {\r\n        width: '50%',\r\n        height: '50%',\r\n        angleClose: true,\r\n        outClose: false,\r\n        pos: {\r\n            align: 'center',\r\n            top: 0, left: 0\r\n        },\r\n        onClose: null\r\n    }\r\n\r\n    _pames = []\r\n\r\n    _isshow = false\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.renderContent = this.renderContent.bind(this)\r\n\r\n        this.state = {\r\n            comp: null,\r\n            width: '50%',\r\n            height: '50%',\r\n            angleClose: true,\r\n            outClose: false,\r\n            pos: {\r\n                top: 0,\r\n                left: 0,\r\n                translate: ''\r\n            },\r\n            close: {\r\n                height: 32\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate() {\r\n        super.onCreate()\r\n    }\r\n\r\n    onData(data) {\r\n        super.onData(data)\r\n\r\n        console.warn('modal popup on data', data)\r\n    }\r\n\r\n    getPosition(_pame = {}) {\r\n        _pame = Tool.structureAssignment(Object.assign({}, this._keep_opts.pos), _pame)\r\n\r\n        let _result = {\r\n            top: 0,\r\n            left: 0,\r\n            translate: ''\r\n        }\r\n\r\n        switch (_pame.align) {\r\n            case 'bottom-center': {\r\n                _result.top = '100%'\r\n                _result.left = '50%'\r\n                _result.translate = 'translate(-50%,-100%)'\r\n\r\n                break\r\n            }\r\n            case 'top-center': {\r\n                _result.top = '0'\r\n                _result.left = '50%'\r\n                _result.translate = 'translate(-50%,0)'\r\n\r\n                break\r\n            }\r\n            case 'left-center': {\r\n                _result.top = '50%'\r\n                _result.left = '0'\r\n                _result.translate = 'translate(0,-50%)'\r\n\r\n                break\r\n            }\r\n            case 'right-center': {\r\n                _result.top = '50%'\r\n                _result.left = '100%'\r\n                _result.translate = 'translate(-100%,-50%)'\r\n\r\n                break\r\n            }\r\n            case 'none': {\r\n                _result.top = _pame.top\r\n                _result.left = _pame.left\r\n                _result.translate = ''\r\n\r\n                break\r\n            }\r\n            default: {\r\n                _result.top = '50%'\r\n                _result.left = '50%'\r\n                _result.translate = 'translate(-50%,-50%)'\r\n\r\n                break\r\n            }\r\n        }\r\n\r\n        return _result\r\n    }\r\n\r\n    onComp(comp, pame = {}) {\r\n        this._isshow = true\r\n\r\n        this._opts = Tool.structureAssignment(Object.assign({}, this._keep_opts), pame)\r\n\r\n        this._opts.pos = Tool.structureAssignment(Object.assign({}, this._keep_opts.pos), pame.pos)\r\n\r\n        this.setState({\r\n            comp: comp,\r\n            width: this._opts.width,\r\n            height: this._opts.height,\r\n            angleClose: this._opts.angleClose,\r\n            outClose: this._opts.outClose,\r\n            pos: this.getPosition(this._opts.pos)\r\n        })\r\n    }\r\n\r\n    onImg(src, pame = {}) {\r\n        this._isshow = true\r\n\r\n        this._opts = Tool.structureAssignment(Object.assign({}, this._keep_opts), pame)\r\n\r\n        this._opts.pos = Tool.structureAssignment(Object.assign({}, this._keep_opts.pos), pame.pos)\r\n\r\n        this.setState({\r\n            comp: (<img src={src} width={'100%'} alt={''} />),\r\n            width: this._opts.width,\r\n            height: this._opts.height,\r\n            angleClose: this._opts.angleClose,\r\n            outClose: this._opts.outClose,\r\n            pos: this.getPosition(this._opts.pos)\r\n        })\r\n    }\r\n\r\n    pushComp(comp, pame = {}) {\r\n        if (this._isshow === true) {\r\n            this._pames.push({\r\n                type: 'comp',\r\n                target: comp,\r\n                pame: pame\r\n            })\r\n        } else {\r\n            this.onComp(comp, pame)\r\n        }\r\n    }\r\n\r\n    pushImg(src, pame = {}) {\r\n        if (this._isshow === true) {\r\n            this._pames.push({\r\n                type: 'img',\r\n                target: src,\r\n                pame: pame\r\n            })\r\n        } else {\r\n            this.onImg(src, pame)\r\n        }\r\n    }\r\n\r\n    close() {\r\n        this.finish()\r\n\r\n        if (this._opts.onClose) {\r\n            this._opts.onClose()\r\n        }\r\n\r\n        this._isshow = false\r\n\r\n        if (this._pames.length > 0) {\r\n            setTimeout(() => {\r\n                let _fast = Object.assign({}, this._pames[0])\r\n\r\n                this._pames.splice(0, 1)\r\n\r\n                this.navigationModal(Popup._path, null, (comp) => {\r\n                    if (_fast.type === 'comp') {\r\n                        comp.onComp(_fast.target, _fast.pame)\r\n                    } else {\r\n                        comp.onImg(_fast.target, _fast.pame)\r\n                    }\r\n                })\r\n            }, 500)\r\n        }\r\n    }\r\n\r\n    renderContent({ theme, language, getapp }) {\r\n        return (\r\n            <ModalPage>\r\n                <div className={'pos-relative'} onClick={(e) => {\r\n                    if (this.state.outClose) {\r\n                        this.close(e)\r\n                    }\r\n                }}>\r\n                    <div style={{\r\n                        position: 'absolute',\r\n                        width: this.state.width,\r\n                        height: this.state.height,\r\n                        top: this.state.pos.top,\r\n                        left: this.state.pos.left,\r\n                        transform: this.state.pos.translate\r\n                    }} onClick={(e) => {\r\n                        e.stopPropagation()\r\n                    }}>\r\n                        <div className={'pos-relative'}>\r\n                            <div style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                width: '100%',\r\n                                height: '100%'\r\n                            }}>\r\n                                {this.state.comp}\r\n                            </div>\r\n\r\n                            {this.state.angleClose === true ? (\r\n                                <div style={{\r\n                                    position: 'absolute',\r\n                                    top: -this.state.close.height,\r\n                                    right: -this.state.close.height\r\n                                }} onClick={(e) => {\r\n                                    this.close(e)\r\n                                }}>\r\n                                    <img src={require('../assets/res/icon/ic_close.png')} width={this.state.close.height} alt={''} />\r\n                                </div>\r\n                            ) : (null)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </ModalPage>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <APPContext.Consumer>\r\n                {this.renderContent}\r\n            </APPContext.Consumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Popup\r\n"]},"metadata":{},"sourceType":"module"}