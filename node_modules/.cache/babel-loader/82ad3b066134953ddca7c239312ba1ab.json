{"ast":null,"code":"import _createForOfIteratorHelper from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\src\\\\router\\\\ScreenFrame.jsx\";\nimport React from 'react';\nimport CSSTransitionGroup from 'react-addons-css-transition-group/index';\n\nvar PopupAnimation = /*#__PURE__*/function (_React$Component) {\n  _inherits(PopupAnimation, _React$Component);\n\n  var _super = _createSuper(PopupAnimation);\n\n  function PopupAnimation(props) {\n    var _this;\n\n    _classCallCheck(this, PopupAnimation);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(PopupAnimation, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.status === false) {\n        return this.props.children;\n      } else {\n        return /*#__PURE__*/React.createElement(CSSTransitionGroup, {\n          transitionName: 'example',\n          transitionEnterTimeout: 200,\n          transitionLeaveTimeout: 200,\n          transitionAppear: true,\n          transitionAppearTimeout: 200,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 17\n          }\n        }, this.props.children);\n      }\n    }\n  }]);\n\n  return PopupAnimation;\n}(React.Component);\n\nvar Root = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Root, _React$Component2);\n\n  var _super2 = _createSuper(Root);\n\n  function Root(props) {\n    var _this2;\n\n    _classCallCheck(this, Root);\n\n    _this2 = _super2.call(this, props);\n    _this2.state = {};\n    return _this2;\n  }\n\n  _createClass(Root, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: 'page-screen-container color-screen-background',\n        style: {\n          zIndex: this.props.zIndex\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'page-screen-container-pack',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 17\n        }\n      }, this.props.children));\n    }\n  }]);\n\n  return Root;\n}(React.Component);\n\nvar Content = /*#__PURE__*/function (_React$Component3) {\n  _inherits(Content, _React$Component3);\n\n  var _super3 = _createSuper(Content);\n\n  function Content(props) {\n    var _this3;\n\n    _classCallCheck(this, Content);\n\n    _this3 = _super3.call(this, props);\n    _this3.state = {};\n    return _this3;\n  }\n\n  _createClass(Content, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: 'page-screen-container-safety',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return Content;\n}(React.Component);\n\nvar ScreenFrame = /*#__PURE__*/function (_React$Component4) {\n  _inherits(ScreenFrame, _React$Component4);\n\n  var _super4 = _createSuper(ScreenFrame);\n\n  function ScreenFrame(props) {\n    var _this4;\n\n    _classCallCheck(this, ScreenFrame);\n\n    _this4 = _super4.call(this, props);\n    _this4._compRef = null;\n    _this4.state = {\n      popup: {\n        // 弹窗配置\n        items: [{\n          active: false,\n          id: null,\n          style: {\n            zIndex: null,\n            top: 0,\n            left: 0\n          },\n          comp: null\n        }],\n        topping: 99\n      }\n    };\n    return _this4;\n  }\n\n  _createClass(ScreenFrame, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {}\n  }, {\n    key: \"pushPopups\",\n    value: function pushPopups() {\n      var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      var _iterator = _createForOfIteratorHelper(list),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _it = _step.value;\n\n          if (!_it || !_it.comp || !_it.pame) {\n            continue;\n          }\n\n          this.pushPopup(_it.pame, _it.comp);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"pushPopup\",\n    value: function pushPopup() {\n      var pame = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        x: 0,\n        y: 0,\n        id: null,\n        className: null\n      };\n      var comp = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (!pame.id || !comp) {\n        return;\n      }\n\n      var _pops = this.state.popup;\n      _pops.items = _pops.items.filter(function (item) {\n        return !(item.id === pame.id);\n      });\n\n      _pops.items.push({\n        active: false,\n        id: pame.id,\n        className: pame.className,\n        style: {\n          zIndex: 0,\n          top: pame.y,\n          left: pame.x\n        },\n        comp: comp\n      }); // eslint-disable-next-line react/no-direct-mutation-state\n\n\n      this.state.popup = _pops;\n      this.setState({\n        popup: _pops\n      });\n    }\n  }, {\n    key: \"showPopup\",\n    value: function showPopup(id) {\n      var pos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var _pops = this.state.popup;\n\n      var _iterator2 = _createForOfIteratorHelper(_pops.items),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _it = _step2.value;\n\n          if (_it.id === id) {\n            _it.active = true;\n            _it.style.zIndex = ++_pops.topping;\n            _it.style.top = pos.y || _it.style.top;\n            _it.style.left = pos.x || _it.style.left;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      this.setState({\n        popup: _pops\n      });\n    }\n  }, {\n    key: \"closePopup\",\n    value: function closePopup(id) {\n      var _pops = this.state.popup;\n\n      var _iterator3 = _createForOfIteratorHelper(_pops.items),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _it = _step3.value;\n\n          if (_it.id === id) {\n            _it.active = false;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      this.setState({\n        popup: _pops\n      });\n    }\n  }, {\n    key: \"removePopup\",\n    value: function removePopup(id) {\n      var _pops = this.state.popup;\n      _pops.items = _pops.items.filter(function (item) {\n        return !(item.id === id);\n      }); // eslint-disable-next-line react/no-direct-mutation-state\n\n      this.state.popup = _pops;\n      this.setState({\n        popup: _pops\n      });\n    }\n  }, {\n    key: \"getCompRef\",\n    value: function getCompRef() {\n      return this._compRef;\n    }\n  }, {\n    key: \"getComp\",\n    value: function getComp() {\n      var _this5 = this;\n\n      if (this.props.component) {\n        return /*#__PURE__*/React.createElement(this.props.component, {\n          screen: this,\n          router: this.props.router,\n          initPame: this.props.initPame,\n          ref: function ref(comp) {\n            if (comp) {\n              _this5._compRef = comp;\n\n              if (_this5.props.compHandle) {\n                _this5.props.compHandle(comp);\n              }\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(\"span\", {\n          ref: function ref(comp) {\n            if (comp) {\n              _this5._compRef = comp;\n\n              if (_this5.props.compHandle) {\n                _this5.props.compHandle(comp);\n              }\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 17\n          }\n        }, 'This activity has no content components');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return /*#__PURE__*/React.createElement(Root, {\n        zIndex: this.props.zIndex,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Content, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }\n      }, this.getComp()), /*#__PURE__*/React.createElement(PopupAnimation, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }, this.state.popup.items.filter(function (item) {\n        return item.active;\n      }).map(function (item, key) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: key,\n          className: \"pos-absolute-nosize \".concat(item.className || ''),\n          style: Object.assign({}, item.style),\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 29\n          }\n        }, item.comp);\n      })));\n    }\n  }]);\n\n  return ScreenFrame;\n}(React.Component);\n\nexport default ScreenFrame;","map":{"version":3,"sources":["C:/Users/elandtong/Desktop/ReactElandFramework/src/router/ScreenFrame.jsx"],"names":["React","CSSTransitionGroup","PopupAnimation","props","state","status","children","Component","Root","zIndex","Content","ScreenFrame","_compRef","popup","items","active","id","style","top","left","comp","topping","list","_it","pame","pushPopup","x","y","className","_pops","filter","item","push","setState","pos","component","router","initPame","compHandle","getComp","map","key","Object","assign"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport CSSTransitionGroup from 'react-addons-css-transition-group/index';\r\n\r\nclass PopupAnimation extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.props.status === false) {\r\n            return (this.props.children)\r\n        } else {\r\n            return (\r\n                <CSSTransitionGroup transitionName={'example'}\r\n                    transitionEnterTimeout={200}\r\n                    transitionLeaveTimeout={200}\r\n                    transitionAppear={true}\r\n                    transitionAppearTimeout={200}>\r\n                    {this.props.children}\r\n                </CSSTransitionGroup>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nclass Root extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'page-screen-container color-screen-background'} style={{ zIndex: this.props.zIndex }}>\r\n                <div className={'page-screen-container-pack'}>\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass Content extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={'page-screen-container-safety'}>\r\n                {this.props.children}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nclass ScreenFrame extends React.Component {\r\n    _compRef = null\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            popup: { // 弹窗配置\r\n                items: [{\r\n                    active: false,\r\n                    id: null,\r\n                    style: {\r\n                        zIndex: null, top: 0, left: 0\r\n                    },\r\n                    comp: null\r\n                }],\r\n                topping: 99\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    componentWillUnmount() {\r\n    }\r\n\r\n    pushPopups(list = []) {\r\n        for (let _it of list) {\r\n            if (!_it || !_it.comp || !_it.pame) { continue }\r\n            this.pushPopup(_it.pame, _it.comp)\r\n        }\r\n    }\r\n\r\n    pushPopup(pame = {\r\n        x: 0, y: 0, id: null, className: null\r\n    }, comp) {\r\n        if (!pame.id || !comp) { return }\r\n\r\n        let _pops = this.state.popup\r\n\r\n        _pops.items = _pops.items.filter((item) => {\r\n            return !(item.id === pame.id)\r\n        })\r\n\r\n        _pops.items.push({\r\n            active: false,\r\n            id: pame.id,\r\n            className: pame.className,\r\n            style: {\r\n                zIndex: 0, top: pame.y, left: pame.x\r\n            },\r\n            comp: comp\r\n        })\r\n\r\n        // eslint-disable-next-line react/no-direct-mutation-state\r\n        this.state.popup = _pops\r\n\r\n        this.setState({ popup: _pops })\r\n    }\r\n\r\n    showPopup(id, pos = {}) {\r\n        let _pops = this.state.popup\r\n\r\n        for (let _it of _pops.items) {\r\n            if (_it.id === id) {\r\n                _it.active = true\r\n\r\n                _it.style.zIndex = ++_pops.topping\r\n                _it.style.top = pos.y || _it.style.top\r\n                _it.style.left = pos.x || _it.style.left\r\n\r\n                break\r\n            }\r\n        }\r\n\r\n        this.setState({ popup: _pops })\r\n    }\r\n\r\n    closePopup(id) {\r\n        let _pops = this.state.popup\r\n\r\n        for (let _it of _pops.items) {\r\n            if (_it.id === id) {\r\n                _it.active = false\r\n                break\r\n            }\r\n        }\r\n\r\n        this.setState({ popup: _pops })\r\n    }\r\n\r\n    removePopup(id) {\r\n        let _pops = this.state.popup\r\n\r\n        _pops.items = _pops.items.filter((item) => {\r\n            return !(item.id === id)\r\n        })\r\n\r\n        // eslint-disable-next-line react/no-direct-mutation-state\r\n        this.state.popup = _pops\r\n\r\n        this.setState({ popup: _pops })\r\n    }\r\n\r\n    getCompRef() {\r\n        return this._compRef\r\n    }\r\n\r\n    getComp() {\r\n        if (this.props.component) {\r\n            return (\r\n                <this.props.component screen={this} router={this.props.router} initPame={this.props.initPame} ref={(comp) => {\r\n                    if (comp) {\r\n                        this._compRef = comp\r\n\r\n                        if (this.props.compHandle) {\r\n                            this.props.compHandle(comp)\r\n                        }\r\n                    }\r\n                }} />\r\n            )\r\n        } else {\r\n            return (\r\n                <span ref={(comp) => {\r\n                    if (comp) {\r\n                        this._compRef = comp\r\n\r\n                        if (this.props.compHandle) {\r\n                            this.props.compHandle(comp)\r\n                        }\r\n                    }\r\n                }}>\r\n                    {'This activity has no content components'}\r\n                </span>\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Root zIndex={this.props.zIndex}>\r\n                <Content>\r\n                    {this.getComp()}\r\n                </Content>\r\n\r\n                <PopupAnimation>\r\n                    {this.state.popup.items.filter((item) => {\r\n                        return item.active\r\n                    }).map((item, key) => {\r\n                        return (\r\n                            <div key={key} className={`pos-absolute-nosize ${item.className || ''}`} style={Object.assign({}, item.style)}>{item.comp}</div>\r\n                        )\r\n                    })}\r\n                </PopupAnimation>\r\n            </Root>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ScreenFrame\r\n"]},"metadata":{},"sourceType":"module"}