{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\n\nvar EventBus = /*#__PURE__*/function () {\n  function EventBus() {\n    _classCallCheck(this, EventBus);\n\n    this.subs = [];\n    this.subs = [];\n  }\n\n  _createClass(EventBus, [{\n    key: \"emit\",\n    value: function emit(event) {\n      if (!event) {\n        return false;\n      }\n\n      event.theme = event.theme || 'all';\n      var _succ = false;\n\n      for (var i = 0; i < this.subs.length; i++) {\n        var _it = this.subs[i];\n\n        if (_it.theme === event.theme && _it.handle) {\n          _it.handle(event);\n\n          _succ = true;\n        }\n      }\n\n      return _succ;\n    }\n  }, {\n    key: \"onemit\",\n    value: function onemit() {\n      var theme = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n      var handle = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (!handle) {\n        return false;\n      }\n\n      this.subs.push({\n        theme: theme,\n        handle: handle\n      });\n      return true;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(handle) {\n      if (!handle) {\n        return false;\n      }\n\n      var _startlen = this.subs.length;\n      this.subs = this.subs.filter(function (item) {\n        return !(item.handle === handle);\n      });\n\n      if (this.subs.length === _startlen) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }]);\n\n  return EventBus;\n}();\n\nvar Emit = /*#__PURE__*/function () {\n  function Emit() {\n    _classCallCheck(this, Emit);\n  }\n\n  _createClass(Emit, null, [{\n    key: \"on\",\n    value: function on(theme, handle) {\n      return this._eventbus.onemit(theme, handle);\n    }\n  }, {\n    key: \"exe\",\n    value: function exe(event) {\n      return this._eventbus.emit(event);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(handle) {\n      return this._eventbus.remove(handle);\n    }\n    /**\r\n     * 危险方法\r\n     * 将清除所有事件监听\r\n    */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this._eventbus = new EventBus();\n    }\n  }]);\n\n  return Emit;\n}();\n\nEmit._eventbus = new EventBus();\nexport { EventBus, Emit };\nexport default Emit;","map":{"version":3,"sources":["C:/Users/elandtong/Desktop/ReactElandFramework/src/utils/EventBus.js"],"names":["EventBus","subs","event","theme","_succ","i","length","_it","handle","push","_startlen","filter","item","Emit","_eventbus","onemit","emit","remove"],"mappings":";;;IAAMA,Q;AAGF,sBAAc;AAAA;;AAAA,SAFdC,IAEc,GAFP,EAEO;AACV,SAAKA,IAAL,GAAY,EAAZ;AACH;;;;yBAEIC,K,EAAO;AACR,UAAI,CAACA,KAAL,EAAY;AACR,eAAO,KAAP;AACH;;AAEDA,MAAAA,KAAK,CAACC,KAAN,GAAcD,KAAK,CAACC,KAAN,IAAe,KAA7B;AAEA,UAAIC,KAAK,GAAG,KAAZ;;AAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,IAAL,CAAUK,MAA9B,EAAsCD,CAAC,EAAvC,EAA2C;AACvC,YAAIE,GAAG,GAAG,KAAKN,IAAL,CAAUI,CAAV,CAAV;;AAEA,YAAIE,GAAG,CAACJ,KAAJ,KAAcD,KAAK,CAACC,KAApB,IAA6BI,GAAG,CAACC,MAArC,EAA6C;AACzCD,UAAAA,GAAG,CAACC,MAAJ,CAAWN,KAAX;;AAEAE,UAAAA,KAAK,GAAG,IAAR;AACH;AACJ;;AAED,aAAOA,KAAP;AACH;;;6BAE6B;AAAA,UAAvBD,KAAuB,uEAAf,KAAe;AAAA,UAARK,MAAQ;;AAC1B,UAAI,CAACA,MAAL,EAAa;AACT,eAAO,KAAP;AACH;;AAED,WAAKP,IAAL,CAAUQ,IAAV,CAAe;AACXN,QAAAA,KAAK,EAAEA,KADI;AAEXK,QAAAA,MAAM,EAAEA;AAFG,OAAf;AAKA,aAAO,IAAP;AACH;;;2BAEMA,M,EAAQ;AACX,UAAI,CAACA,MAAL,EAAa;AACT,eAAO,KAAP;AACH;;AAED,UAAIE,SAAS,GAAG,KAAKT,IAAL,CAAUK,MAA1B;AAEA,WAAKL,IAAL,GAAY,KAAKA,IAAL,CAAUU,MAAV,CAAiB,UAACC,IAAD,EAAU;AACnC,eAAO,EAAEA,IAAI,CAACJ,MAAL,KAAgBA,MAAlB,CAAP;AACH,OAFW,CAAZ;;AAIA,UAAI,KAAKP,IAAL,CAAUK,MAAV,KAAqBI,SAAzB,EAAoC;AAChC,eAAO,KAAP;AACH,OAFD,MAEO;AACH,eAAO,IAAP;AACH;AACJ;;;;;;IAGCG,I;;;;;;;uBAGQV,K,EAAOK,M,EAAQ;AACrB,aAAO,KAAKM,SAAL,CAAeC,MAAf,CAAsBZ,KAAtB,EAA6BK,MAA7B,CAAP;AACH;;;wBAEUN,K,EAAO;AACd,aAAO,KAAKY,SAAL,CAAeE,IAAf,CAAoBd,KAApB,CAAP;AACH;;;2BAEaM,M,EAAQ;AAClB,aAAO,KAAKM,SAAL,CAAeG,MAAf,CAAsBT,MAAtB,CAAP;AACH;AAED;;;;;;;4BAIe;AACX,WAAKM,SAAL,GAAiB,IAAId,QAAJ,EAAjB;AACH;;;;;;AArBCa,I,CACKC,S,GAAY,IAAId,QAAJ,E;AAuBvB,SAASA,QAAT,EAAmBa,IAAnB;AAEA,eAAeA,IAAf","sourcesContent":["class EventBus {\r\n    subs = []\r\n\r\n    constructor() {\r\n        this.subs = []\r\n    }\r\n\r\n    emit(event) {\r\n        if (!event) {\r\n            return false\r\n        }\r\n\r\n        event.theme = event.theme || 'all'\r\n\r\n        let _succ = false\r\n\r\n        for (let i = 0; i < this.subs.length; i++) {\r\n            let _it = this.subs[i]\r\n\r\n            if (_it.theme === event.theme && _it.handle) {\r\n                _it.handle(event)\r\n\r\n                _succ = true\r\n            }\r\n        }\r\n\r\n        return _succ\r\n    }\r\n\r\n    onemit(theme = 'all', handle) {\r\n        if (!handle) {\r\n            return false\r\n        }\r\n\r\n        this.subs.push({\r\n            theme: theme,\r\n            handle: handle\r\n        })\r\n\r\n        return true\r\n    }\r\n\r\n    remove(handle) {\r\n        if (!handle) {\r\n            return false\r\n        }\r\n\r\n        let _startlen = this.subs.length\r\n\r\n        this.subs = this.subs.filter((item) => {\r\n            return !(item.handle === handle)\r\n        })\r\n\r\n        if (this.subs.length === _startlen) {\r\n            return false\r\n        } else {\r\n            return true\r\n        }\r\n    }\r\n}\r\n\r\nclass Emit {\r\n    static _eventbus = new EventBus()\r\n\r\n    static on(theme, handle) {\r\n        return this._eventbus.onemit(theme, handle)\r\n    }\r\n\r\n    static exe(event) {\r\n        return this._eventbus.emit(event)\r\n    }\r\n\r\n    static remove(handle) {\r\n        return this._eventbus.remove(handle)\r\n    }\r\n\r\n    /**\r\n     * 危险方法\r\n     * 将清除所有事件监听\r\n    */\r\n    static reset() {\r\n        this._eventbus = new EventBus()\r\n    }\r\n}\r\n\r\nexport { EventBus, Emit }\r\n\r\nexport default Emit\r\n"]},"metadata":{},"sourceType":"module"}