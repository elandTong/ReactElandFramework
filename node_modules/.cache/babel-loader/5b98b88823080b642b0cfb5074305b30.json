{"ast":null,"code":"import _createForOfIteratorHelper from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _classCallCheck from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _get from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\elandtong\\\\Desktop\\\\ReactElandFramework\\\\src\\\\screen\\\\Main.jsx\";\nimport React from 'react';\nimport '../assets/style/screen.main.scss';\nimport Config from '../config';\nimport Spiner from '../modal/Spiner';\nimport Toast from '../modal/Toast';\nimport BaseScreen from '../router/BaseScreen';\nimport { ScreenPage } from '../router/Page';\nimport NetApi from '../utils/NetApi';\nimport Tool, { ModalTool } from '../utils/Tool';\nimport LotteryGame from '../widget/business/LotteryGame';\nimport FixedModal from '../widget/FixedModal';\nimport Minirefresh from '../widget/Minirefresh';\nimport Navbar from '../widget/Navbar';\nimport { TabSlide, TabSwiper } from '../widget/Swiper';\nimport ToolbarMenu from '../widget/ToolbarMenu';\nimport Login from './Login';\n\nvar Main = /*#__PURE__*/function (_BaseScreen) {\n  _inherits(Main, _BaseScreen);\n\n  var _super = _createSuper(Main);\n\n  function Main(props) {\n    var _this;\n\n    _classCallCheck(this, Main);\n\n    _this = _super.call(this, props);\n    _this._swiperCompRef = null;\n    _this._navbarCompRef = null;\n    _this._jsondata = null;\n    _this._jsondata = require('../assets/json/lotterys.json');\n    _this.state = {\n      title: Config.LANGUAG_USE.appname,\n      refresh: {\n        up: {\n          isLock: true,\n          isAuto: true,\n          loadFull: {\n            isEnable: true\n          }\n        },\n        down: {\n          isAuto: false,\n          loadFull: {\n            isEnable: true\n          }\n        }\n      },\n      data: {\n        ctc: _this._jsondata.ctc,\n        gfc: _this._jsondata.gfc\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Main, [{\n    key: \"onCreate\",\n    value: function onCreate(props) {\n      var _this2 = this;\n\n      _get(_getPrototypeOf(Main.prototype), \"onCreate\", this).call(this, props);\n\n      this.pushPopups([{\n        pame: {\n          id: 'toolbarmenu' // x: 0, y: 0,\n          // className: '' // 作用于弹出壳\n\n        },\n        comp: /*#__PURE__*/React.createElement(FixedModal, {\n          className: 'common-boxsize-full-number common-boxsize-background',\n          onClick: function onClick(e) {\n            _this2.closePopup('toolbarmenu');\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(ToolbarMenu, {\n          className: 'pos-absolute-nosize',\n          style: {\n            left: Tool.getScreenSize().w - 101,\n            top: 46\n          },\n          onItemClick: function onItemClick(item, key, e) {\n            Config.setAppTheme(item.key);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }\n        }))\n      }]);\n      console.warn('screen main on create!');\n    }\n  }, {\n    key: \"onStart\",\n    value: function onStart() {\n      console.warn('screen main on start!');\n    }\n  }, {\n    key: \"onResume\",\n    value: function onResume() {\n      console.warn('screen main on resume!');\n    }\n  }, {\n    key: \"onPause\",\n    value: function onPause() {\n      console.warn('screen main on pause!');\n    }\n  }, {\n    key: \"onStop\",\n    value: function onStop() {\n      console.warn('screen main on stop!');\n    }\n  }, {\n    key: \"onData\",\n    value: function onData(data) {\n      _get(_getPrototypeOf(Main.prototype), \"onData\", this).call(this, data);\n\n      console.warn('screen main on data', data);\n    }\n  }, {\n    key: \"onNativeBack\",\n    value: function onNativeBack(isStacktop, data) {\n      _get(_getPrototypeOf(Main.prototype), \"onNativeBack\", this).call(this, isStacktop, data);\n    }\n  }, {\n    key: \"onTab1ItemClick\",\n    value: function onTab1ItemClick(item, key, e) {\n      this.startModal({\n        // 意图跳转 不会改变 内置路由池\n        component: Spiner,\n        path: Spiner._path,\n        opts: {\n          props: {}\n        }\n      }, {\n        message: '这是main页面传递的Spiner数据'\n      }, function (comp) {\n        comp.setText('你好,SpaRouter世界!', true);\n      });\n      ModalTool.showToast(null, function (comp) {\n        comp.setText('你好,SpaRouter世界', Toast.LONG);\n      }); // 如果 Toast 在内置路由池内 则可以:\n      // this.navigationModal(Toast._path, null, (comp) => { comp.setText('哈哈哈哈😄------') })\n\n      console.error('tab1 click item', item, ' key', key);\n    }\n  }, {\n    key: \"onTab2ItemClick\",\n    value: function onTab2ItemClick(item, key, e) {\n      this.startScreen({\n        component: Login,\n        path: Login._path,\n        opts: {\n          props: {}\n        }\n      }, {\n        message: '这是main页面传递的数据'\n      });\n      console.error('tab2 click item', item, ' key', key);\n    }\n  }, {\n    key: \"setCtcData\",\n    value: function setCtcData() {\n      var games = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var _data = this.state.data;\n\n      var _iterator = _createForOfIteratorHelper(_data.ctc),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var _it = _step.value;\n          _it.games = games.filter(function (_gt) {\n            return _it.id === _gt.class;\n          });\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return _data.ctc;\n    }\n  }, {\n    key: \"setGfcData\",\n    value: function setGfcData() {\n      var games = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var _data = this.state.data;\n\n      var _iterator2 = _createForOfIteratorHelper(_data.gfc),\n          _step2;\n\n      try {\n        var _loop2 = function _loop2() {\n          var _it = _step2.value;\n          _it.games = games.filter(function (_gt) {\n            return _it.id === _gt.class;\n          });\n        };\n\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return _data.gfc;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData() {\n      var games = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var _data = this.state.data;\n      var _hkgs = [];\n\n      var _iterator3 = _createForOfIteratorHelper(games),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _it = _step3.value;\n\n          switch (_it.apicode) {\n            case 'lottery':\n              {\n                _data.ctc = this.setCtcData(_it.games);\n                break;\n              }\n\n            case 'gfc':\n              {\n                _data.gfc = this.setGfcData(_it.games);\n                break;\n              }\n\n            case 'lotto':\n              {\n                _hkgs = _it.games;\n                break;\n              }\n\n            default:\n              {\n                break;\n              }\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      var _iterator4 = _createForOfIteratorHelper(_data.ctc),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _it2 = _step4.value;\n\n          if (_it2.id === 'hk6') {\n            _it2.games = _it2.games.concat(_hkgs);\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      this.setState({\n        data: _data\n      });\n      console.error('main update setdata', _data);\n    }\n  }, {\n    key: \"update\",\n    value: function update(comp) {\n      var _this3 = this;\n\n      NetApi.call('game/getGames', {}, function (data) {\n        if (data.code === 0) {\n          var _iterator5 = _createForOfIteratorHelper(data.result),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _item = _step5.value;\n\n              if (_item.no === 10) {\n                _this3.setData(_item.games);\n\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          if (comp instanceof Minirefresh) {\n            comp.endDownLoading(true);\n          }\n        }\n      }, function (err) {\n        if (comp instanceof Minirefresh) {\n          comp.endDownLoading(false);\n        }\n      });\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(_ref) {\n      var _this4 = this;\n\n      var theme = _ref.theme,\n          language = _ref.language,\n          getapp = _ref.getapp;\n      return /*#__PURE__*/React.createElement(ScreenPage, {\n        opts: {\n          toolbar: {\n            title: this.state.title,\n            hideBack: true,\n            hideMenu: false,\n            onBack: function onBack(e) {},\n            onMenu: function onMenu(e) {\n              _this4.showPopup('toolbarmenu');\n            }\n          },\n          hideToolbar: false\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Navbar, {\n        initIndex: 0,\n        opts: {\n          items: [{\n            name: Config.LANGUAG_USE.ctcname\n          }, {\n            name: Config.LANGUAG_USE.gfcname\n          }],\n          onSelect: function onSelect(key, e) {}\n        },\n        getSwiper: function getSwiper() {\n          return _this4._swiperCompRef;\n        },\n        ref: function ref(comp) {\n          if (comp) {\n            _this4._navbarCompRef = comp;\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(TabSwiper, {\n        init: 0,\n        allowTouchMove: true,\n        width: '100%',\n        height: Tool.getActContHeight() - 45,\n        onSelect: function onSelect(i) {},\n        getNavbar: function getNavbar() {\n          return _this4._navbarCompRef;\n        },\n        ref: function ref(comp) {\n          if (comp) {\n            _this4._swiperCompRef = comp;\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TabSlide, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'common-boxsize-full',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Minirefresh, {\n        className: 'screen-main-slide-background',\n        options: this.state.refresh,\n        pullDown: function pullDown(comp) {\n          _this4.update(comp);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 33\n        }\n      }, Tool.insertSplitline(this.state.data.ctc.filter(function (item) {\n        return item.games && item.games.length > 0;\n      }).map(function (item, key) {\n        return /*#__PURE__*/React.createElement(LotteryGame, {\n          key: key,\n          data: item,\n          onItemClick: function onItemClick(subitem, subkey, e) {\n            _this4.onTab1ItemClick(subitem, subkey, e);\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 45\n          }\n        });\n      }))))), /*#__PURE__*/React.createElement(TabSlide, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: 'common-boxsize-full',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Minirefresh, {\n        className: 'screen-main-slide-background',\n        options: this.state.refresh,\n        pullDown: function pullDown(comp) {\n          _this4.update(comp);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 33\n        }\n      }, Tool.insertSplitline(this.state.data.gfc.filter(function (item) {\n        return item.games.length > 0;\n      }).map(function (item, key) {\n        return /*#__PURE__*/React.createElement(LotteryGame, {\n          key: key,\n          data: item,\n          onItemClick: function onItemClick(subitem, subkey, e) {\n            _this4.onTab2ItemClick(subitem, subkey, e);\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 45\n          }\n        });\n      }))))))));\n    }\n  }]);\n\n  return Main;\n}(BaseScreen);\n\nMain._path = '/main';\nexport default Main;","map":{"version":3,"sources":["C:/Users/elandtong/Desktop/ReactElandFramework/src/screen/Main.jsx"],"names":["React","Config","Spiner","Toast","BaseScreen","ScreenPage","NetApi","Tool","ModalTool","LotteryGame","FixedModal","Minirefresh","Navbar","TabSlide","TabSwiper","ToolbarMenu","Login","Main","props","_swiperCompRef","_navbarCompRef","_jsondata","require","state","title","LANGUAG_USE","appname","refresh","up","isLock","isAuto","loadFull","isEnable","down","data","ctc","gfc","pushPopups","pame","id","comp","e","closePopup","left","getScreenSize","w","top","item","key","setAppTheme","console","warn","isStacktop","startModal","component","path","_path","opts","message","setText","showToast","LONG","error","startScreen","games","_data","_it","filter","_gt","class","_hkgs","apicode","setCtcData","setGfcData","concat","setState","call","code","result","_item","no","setData","endDownLoading","err","theme","language","getapp","toolbar","hideBack","hideMenu","onBack","onMenu","showPopup","hideToolbar","width","height","items","name","ctcname","gfcname","onSelect","getActContHeight","i","update","insertSplitline","length","map","subitem","subkey","onTab1ItemClick","onTab2ItemClick"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport '../assets/style/screen.main.scss';\r\nimport Config from '../config';\r\nimport Spiner from '../modal/Spiner';\r\nimport Toast from '../modal/Toast';\r\nimport BaseScreen from '../router/BaseScreen';\r\nimport { ScreenPage } from '../router/Page';\r\nimport NetApi from '../utils/NetApi';\r\nimport Tool, { ModalTool } from '../utils/Tool';\r\nimport LotteryGame from '../widget/business/LotteryGame';\r\nimport FixedModal from '../widget/FixedModal';\r\nimport Minirefresh from '../widget/Minirefresh';\r\nimport Navbar from '../widget/Navbar';\r\nimport { TabSlide, TabSwiper } from '../widget/Swiper';\r\nimport ToolbarMenu from '../widget/ToolbarMenu';\r\nimport Login from './Login';\r\n\r\nclass Main extends BaseScreen {\r\n    static _path = '/main'\r\n\r\n    _swiperCompRef = null\r\n\r\n    _navbarCompRef = null\r\n\r\n    _jsondata = null\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this._jsondata = require('../assets/json/lotterys.json')\r\n\r\n        this.state = {\r\n            title: Config.LANGUAG_USE.appname,\r\n            refresh: {\r\n                up: {\r\n                    isLock: true,\r\n                    isAuto: true,\r\n                    loadFull: {\r\n                        isEnable: true,\r\n                    }\r\n                },\r\n                down: {\r\n                    isAuto: false,\r\n                    loadFull: {\r\n                        isEnable: true,\r\n                    }\r\n                }\r\n            },\r\n            data: {\r\n                ctc: this._jsondata.ctc,\r\n                gfc: this._jsondata.gfc\r\n            }\r\n        }\r\n    }\r\n\r\n    onCreate(props) {\r\n        super.onCreate(props)\r\n\r\n        this.pushPopups([{\r\n            pame: {\r\n                id: 'toolbarmenu',\r\n                // x: 0, y: 0,\r\n                // className: '' // 作用于弹出壳\r\n            },\r\n            comp: (\r\n                <FixedModal className={'common-boxsize-full-number common-boxsize-background'} onClick={(e) => {\r\n                    this.closePopup('toolbarmenu')\r\n                }}>\r\n                    <ToolbarMenu className={'pos-absolute-nosize'} style={{\r\n                        left: Tool.getScreenSize().w - 101, top: 46\r\n                    }} onItemClick={(item, key, e) => {\r\n                        Config.setAppTheme(item.key)\r\n                    }} />\r\n                </FixedModal>\r\n            )\r\n        }])\r\n\r\n        console.warn('screen main on create!')\r\n    }\r\n\r\n    onStart() {\r\n        console.warn('screen main on start!')\r\n    }\r\n\r\n    onResume() {\r\n        console.warn('screen main on resume!')\r\n    }\r\n\r\n    onPause() {\r\n        console.warn('screen main on pause!')\r\n    }\r\n\r\n    onStop() {\r\n        console.warn('screen main on stop!')\r\n    }\r\n\r\n    onData(data) {\r\n        super.onData(data)\r\n\r\n        console.warn('screen main on data', data)\r\n    }\r\n\r\n    onNativeBack(isStacktop, data) {\r\n        super.onNativeBack(isStacktop, data)\r\n    }\r\n\r\n    onTab1ItemClick(item, key, e) {\r\n        this.startModal({ // 意图跳转 不会改变 内置路由池\r\n            component: Spiner,\r\n            path: Spiner._path,\r\n            opts: {\r\n                props: {\r\n                }\r\n            }\r\n        }, {\r\n            message: '这是main页面传递的Spiner数据'\r\n        }, (comp) => {\r\n            comp.setText('你好,SpaRouter世界!', true)\r\n        })\r\n\r\n        ModalTool.showToast(null, (comp) => {\r\n            comp.setText('你好,SpaRouter世界', Toast.LONG)\r\n        })\r\n\r\n        // 如果 Toast 在内置路由池内 则可以:\r\n        // this.navigationModal(Toast._path, null, (comp) => { comp.setText('哈哈哈哈😄------') })\r\n\r\n        console.error('tab1 click item', item, ' key', key)\r\n    }\r\n\r\n    onTab2ItemClick(item, key, e) {\r\n        this.startScreen({\r\n            component: Login,\r\n            path: Login._path,\r\n            opts: {\r\n                props: {\r\n                }\r\n            }\r\n        }, {\r\n            message: '这是main页面传递的数据'\r\n        })\r\n\r\n        console.error('tab2 click item', item, ' key', key)\r\n    }\r\n\r\n    setCtcData(games = []) {\r\n        let _data = this.state.data\r\n\r\n        for (let _it of _data.ctc) {\r\n            _it.games = games.filter((_gt) => {\r\n                return _it.id === _gt.class\r\n            })\r\n        }\r\n\r\n        return _data.ctc\r\n    }\r\n\r\n    setGfcData(games = []) {\r\n        let _data = this.state.data\r\n\r\n        for (let _it of _data.gfc) {\r\n            _it.games = games.filter((_gt) => {\r\n                return _it.id === _gt.class\r\n            })\r\n        }\r\n\r\n        return _data.gfc\r\n    }\r\n\r\n    setData(games = []) {\r\n        let _data = this.state.data\r\n\r\n        let _hkgs = []\r\n\r\n        for (let _it of games) {\r\n            switch (_it.apicode) {\r\n                case 'lottery': {\r\n                    _data.ctc = this.setCtcData(_it.games)\r\n                    break\r\n                }\r\n                case 'gfc': {\r\n                    _data.gfc = this.setGfcData(_it.games)\r\n                    break\r\n                }\r\n                case 'lotto': {\r\n                    _hkgs = _it.games\r\n                    break\r\n                }\r\n                default: {\r\n                    break\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let _it of _data.ctc) {\r\n            if (_it.id === 'hk6') {\r\n                _it.games = _it.games.concat(_hkgs)\r\n            }\r\n        }\r\n\r\n        this.setState({ data: _data })\r\n\r\n        console.error('main update setdata', _data)\r\n    }\r\n\r\n    update(comp) {\r\n        NetApi.call('game/getGames', {}, (data) => {\r\n            if (data.code === 0) {\r\n                for (let _item of data.result) {\r\n                    if (_item.no === 10) {\r\n                        this.setData(_item.games)\r\n                        break\r\n                    }\r\n                }\r\n\r\n                if (comp instanceof Minirefresh) {\r\n                    comp.endDownLoading(true)\r\n                }\r\n            }\r\n        }, (err) => {\r\n            if (comp instanceof Minirefresh) {\r\n                comp.endDownLoading(false)\r\n            }\r\n        })\r\n    }\r\n\r\n    renderContent({ theme, language, getapp }) {\r\n        return (\r\n            <ScreenPage opts={{\r\n                toolbar: {\r\n                    title: this.state.title,\r\n                    hideBack: true,\r\n                    hideMenu: false,\r\n                    onBack: (e) => {\r\n                    },\r\n                    onMenu: (e) => {\r\n                        this.showPopup('toolbarmenu')\r\n                    }\r\n                },\r\n                hideToolbar: false\r\n            }}>\r\n                <div style={{\r\n                    width: '100%',\r\n                    height: '100%'\r\n                }}>\r\n                    <Navbar initIndex={0} opts={{\r\n                        items: [{\r\n                            name: Config.LANGUAG_USE.ctcname\r\n                        }, {\r\n                            name: Config.LANGUAG_USE.gfcname\r\n                        }],\r\n                        onSelect: (key, e) => {\r\n                        }\r\n                    }} getSwiper={() => {\r\n                        return this._swiperCompRef\r\n                    }} ref={(comp) => {\r\n                        if (comp) {\r\n                            this._navbarCompRef = comp\r\n                        }\r\n                    }} />\r\n\r\n                    <TabSwiper init={0}\r\n                        allowTouchMove={true}\r\n                        width={'100%'}\r\n                        height={Tool.getActContHeight() - 45}\r\n                        onSelect={(i) => {\r\n                        }}\r\n                        getNavbar={() => {\r\n                            return this._navbarCompRef\r\n                        }}\r\n                        ref={(comp) => {\r\n                            if (comp) {\r\n                                this._swiperCompRef = comp\r\n                            }\r\n                        }}>\r\n                        <TabSlide>\r\n                            <div className={'common-boxsize-full'}>\r\n                                <Minirefresh className={'screen-main-slide-background'} options={this.state.refresh}\r\n                                    pullDown={(comp) => {\r\n                                        this.update(comp)\r\n                                    }}>\r\n                                    {Tool.insertSplitline(this.state.data.ctc.filter((item) => {\r\n                                        return item.games && item.games.length > 0\r\n                                    }).map((item, key) => {\r\n                                        return (\r\n                                            <LotteryGame key={key} data={item} onItemClick={(subitem, subkey, e) => {\r\n                                                this.onTab1ItemClick(subitem, subkey, e)\r\n                                            }} />\r\n                                        )\r\n                                    }))}\r\n                                </Minirefresh>\r\n                            </div>\r\n                        </TabSlide>\r\n\r\n                        <TabSlide>\r\n                            <div className={'common-boxsize-full'}>\r\n                                <Minirefresh className={'screen-main-slide-background'} options={this.state.refresh}\r\n                                    pullDown={(comp) => {\r\n                                        this.update(comp)\r\n                                    }}>\r\n                                    {Tool.insertSplitline(this.state.data.gfc.filter((item) => {\r\n                                        return item.games.length > 0\r\n                                    }).map((item, key) => {\r\n                                        return (\r\n                                            <LotteryGame key={key} data={item} onItemClick={(subitem, subkey, e) => {\r\n                                                this.onTab2ItemClick(subitem, subkey, e)\r\n                                            }} />\r\n                                        )\r\n                                    }))}\r\n                                </Minirefresh>\r\n                            </div>\r\n                        </TabSlide>\r\n                    </TabSwiper>\r\n                </div>\r\n            </ScreenPage>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Main\r\n"]},"metadata":{},"sourceType":"module"}